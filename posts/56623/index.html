<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><title>Linux ä¸‹äº¤å‰ç¼–è¯‘ Rust ç¨‹åºåˆ° OpenWrt - è¥¿ç“œæ˜Ÿ ğŸ‰âœ¨</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-MTHFNXR",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/favicon.png" type="image/png"><meta name="description" content="OpenWrt æ˜¯ä¸€ä¸ªä¸ºåµŒå…¥å¼è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯è·¯ç”±å™¨ï¼‰å¼€å‘çš„é«˜æ‰©å±•åº¦çš„ GNU/Linux å‘è¡Œç‰ˆã€‚"><meta name="keywords" content="Rust,OpenWrt"><meta property="og:type" content="article"><meta property="og:title" content="Linux ä¸‹äº¤å‰ç¼–è¯‘ Rust ç¨‹åºåˆ° OpenWrt"><meta property="og:url" content="http://suikastar.com/posts/56623/index.html"><meta property="og:site_name" content="è¥¿ç“œæ˜Ÿ ğŸ‰âœ¨"><meta property="og:description" content="OpenWrt æ˜¯ä¸€ä¸ªä¸ºåµŒå…¥å¼è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯è·¯ç”±å™¨ï¼‰å¼€å‘çš„é«˜æ‰©å±•åº¦çš„ GNU/Linux å‘è¡Œç‰ˆã€‚"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-06-28T04:01:13.477Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Linux ä¸‹äº¤å‰ç¼–è¯‘ Rust ç¨‹åºåˆ° OpenWrt"><meta name="twitter:description" content="OpenWrt æ˜¯ä¸€ä¸ªä¸ºåµŒå…¥å¼è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯è·¯ç”±å™¨ï¼‰å¼€å‘çš„é«˜æ‰©å±•åº¦çš„ GNU/Linux å‘è¡Œç‰ˆã€‚"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.9/build/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/css/style.css"><script src="https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/js/tools.js"></script></head><body class="mdui-drawer-body-left"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MTHFNXR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="nexmoe-background"><script>var url=get_img_url({default:{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/street_daytime.jpg",w:1920,h:1080},interval:{"6-16":{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/street_daytime.jpg",w:1920,h:1080},"16-19":{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/street_nightfall.jpg",w:1920,h:1080},"19-6":{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/street_at_night.jpg",w:1920,h:1080}}});document.write('<div class="nexmoe-bg" style="background-image: url('+url+')"></div>')</script><div class="mdui-appbar mdui-shadow-0 nexmoe-layout-top"><div class="mdui-toolbar"><a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a><div class="mdui-toolbar-spacer"></div><a href="/" title="suika" class="mdui-btn mdui-btn-icon nexmoe-layout-top-icon"><img src="https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/avatar.jpg"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer"><div class="nexmoe-avatar mdui-ripple"><a href="/" title="suika"><img src="https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/avatar.jpg" alt="suika"></a></div><div class="nexmoe-count"><div><span>æ–‡ç« </span>14</div><div><span>æ ‡ç­¾</span>15</div><div><span>åˆ†ç±»</span>2</div></div><ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}"><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="å›åˆ°é¦–é¡µ"><i class="mdui-list-item-icon nexmoefont icon-home"></i><div class="mdui-list-item-content">å›åˆ°é¦–é¡µ</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="å…³äºç½‘ç«™"><i class="mdui-list-item-icon nexmoefont icon-info-circle"></i><div class="mdui-list-item-content">å…³äºç½‘ç«™</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/links.html" title="æˆ‘çš„æœ‹å‹"><i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i><div class="mdui-list-item-content">æˆ‘çš„æœ‹å‹</div></a></ul><aside id="nexmoe-sidebar"><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">ç¤¾äº¤</h3><div class="nexmoe-widget nexmoe-social"><a class="mdui-ripple" href="https://github.com/suikastar/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color:#191717;background-color:rgba(25,23,23,.15)"><i class="nexmoefont icon-github"></i> </a><a class="mdui-ripple" href="mailto:me@suikastar.com" target="_blank" mdui-tooltip="{content: 'é‚®ç®±'}" style="color:#1da1f2;background-color:rgba(29,161,242,.1)"><i class="nexmoefont icon-mail-fill"></i></a></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">æ–‡ç« åˆ†ç±»</h3><div class="nexmoe-widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/other/">å…¶ä»–</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/code/">ç¼–ç¨‹</a><span class="category-list-count">11</span></li></ul></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">æ ‡ç­¾</h3><div id="randomtagcloud" class="nexmoe-widget tagcloud"><a href="/tags/c/" style="font-size:10px">C</a> <a href="/tags/github/" style="font-size:15px">GitHub</a> <a href="/tags/hexo/" style="font-size:15px">Hexo</a> <a href="/tags/io/" style="font-size:10px">IO</a> <a href="/tags/Java/" style="font-size:10px">Java</a> <a href="/tags/javascript/" style="font-size:20px">JavaScript</a> <a href="/tags/linux/" style="font-size:10px">Linux</a> <a href="/tags/nodejs/" style="font-size:20px">Node.js</a> <a href="/tags/oop/" style="font-size:10px">OOP</a> <a href="/tags/openwrt/" style="font-size:10px">OpenWrt</a> <a href="/tags/python/" style="font-size:10px">Python</a> <a href="/tags/rust/" style="font-size:20px">Rust</a> <a href="/tags/stack/" style="font-size:10px">æ ˆ</a> <a href="/tags/thread/" style="font-size:10px">çº¿ç¨‹</a> <a href="/tags/music/" style="font-size:10px">éŸ³ä¹</a></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">æ–‡ç« å½’æ¡£</h3><div class="nexmoe-widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">2019å¹´09æœˆ</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">2019å¹´08æœˆ</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">2019å¹´07æœˆ</a></li></ul></div></div></aside><div class="nexmoe-copyright">&copy; 2020 suika<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a></div></div></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post"><div class="nexmoe-post-cover mdui-ripple"><script>var data=get_img_data({default:{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/classroom.jpg",w:1920,h:1080},interval:{"6-19":{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/classroom.jpg",w:1920,h:1080},"19-6":{url:"https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/images/classroom_night_02.jpg",w:1920,h:1080}}}),url=data.url,percentage=100*data.ratio;document.write('<div class="img-responsive" style="padding-bottom:'+percentage+'%;"><img src="'+url+'" alt="Linux ä¸‹äº¤å‰ç¼–è¯‘ Rust ç¨‹åºåˆ° OpenWrt"></div>')</script><h1>Linux ä¸‹äº¤å‰ç¼–è¯‘ Rust ç¨‹åºåˆ° OpenWrt</h1></div><div class="nexmoe-post-meta"><a><i class="nexmoefont icon-calendar-fill"></i>2019å¹´08æœˆ06æ—¥</a> <a><i class="nexmoefont icon-areachart"></i>403 å­—</a> <a><i class="nexmoefont icon-time-circle-fill"></i>å¤§æ¦‚ 1 åˆ†é’Ÿ</a> <a class="nexmoefont icon-appstore-fill -link" href="/categories/code/">ç¼–ç¨‹</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/openwrt/">OpenWrt</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/rust/">Rust</a></div><article><p>OpenWrt æ˜¯ä¸€ä¸ªä¸ºåµŒå…¥å¼è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯è·¯ç”±å™¨ï¼‰å¼€å‘çš„é«˜æ‰©å±•åº¦çš„ GNU/Linux å‘è¡Œç‰ˆã€‚<a id="more"></a>OpenWrt ä¸æ˜¯ä¸€ä¸ªå•ä¸€ä¸”ä¸å¯æ›´æ”¹çš„å›ºä»¶ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªå®Œå…¨å¯å†™çš„æ–‡ä»¶ç³»ç»ŸåŠè½¯ä»¶åŒ…ç®¡ç†ã€‚è¿™ä½¿æ‚¨å¯ä»¥ä¸ä½¿ç”¨ä¾›åº”å•†æä¾›çš„åº”ç”¨ç¨‹åºé€‰æ‹©å’Œé…ç½®ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨è½¯ä»¶åŒ…æ¥å®šåˆ¶è®¾å¤‡ä»¥é€‚åº”ä»»ä½•åº”ç”¨ç¨‹åºã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h4 id="ä¸‹è½½-OpenWrt-SDK"><a href="#ä¸‹è½½-OpenWrt-SDK" class="headerlink" title="ä¸‹è½½ OpenWrt SDK"></a>ä¸‹è½½ OpenWrt SDK</h4><p>åœ¨ <a href="https://downloads.openwrt.org/releases/" target="_blank" rel="noopener">è¿™é‡Œ</a> ä¸‹è½½ä¸ä½ è·¯ç”±å™¨åŒ¹é…çš„ SDKï¼ˆå¦‚æœä½ ä¸çŸ¥é“ä½ çš„è·¯ç”±å™¨åŒ¹é…å“ªç§ SDKï¼Œå¯ä»¥åœ¨ <a href="https://openwrt.org/toh/start" target="_blank" rel="noopener">è¿™é‡Œ</a> æŸ¥è¯¢ç›¸å…³ä¿¡æ¯ï¼‰ã€‚ä¾‹å¦‚æˆ‘çš„è·¯ç”±å™¨æ˜¯ WNDR4300ï¼Œåˆ™ï¼š</p><pre><code class="sh">cd ~
wget https://downloads.openwrt.org/releases/18.06.4/targets/ar71xx/nand/openwrt-sdk-18.06.4-ar71xx-nand_gcc-7.3.0_musl.Linux-x86_64.tar.xz</code></pre><h4 id="è§£å‹-OpenWrt-SDK"><a href="#è§£å‹-OpenWrt-SDK" class="headerlink" title="è§£å‹ OpenWrt SDK"></a>è§£å‹ OpenWrt SDK</h4><pre><code class="sh">cd ~
tar -Jxf openwrt-sdk-18.06.4-ar71xx-nand_gcc-7.3.0_musl.Linux-x86_64.tar.xz</code></pre><h4 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h4><pre><code class="sh">PATH=$PATH:~/openwrt-sdk-18.06.4-ar71xx-nand_gcc-7.3.0_musl.Linux-x86_64/staging_dir/toolchain-mips_24kc_gcc-7.3.0_musl/bin
export PATH
export LC_ALL=C.UTF-8</code></pre><h4 id="æ·»åŠ äº¤å‰ç¼–è¯‘å·¥å…·é“¾"><a href="#æ·»åŠ äº¤å‰ç¼–è¯‘å·¥å…·é“¾" class="headerlink" title="æ·»åŠ äº¤å‰ç¼–è¯‘å·¥å…·é“¾"></a>æ·»åŠ äº¤å‰ç¼–è¯‘å·¥å…·é“¾</h4><pre><code class="sh">rustup target add mips-unknown-linux-musl</code></pre><ul><li>è¯·æ³¨æ„ï¼šmips æ˜¯æˆ‘çš„ WNDR4300 è·¯ç”±å™¨å¤„ç†å™¨æ¶æ„ ï¼Œå¦‚æœä½ çš„è·¯ç”±å™¨è·Ÿæˆ‘ä¸åŒï¼Œè¯·åšæ›¿æ¢ï¼Œä¸‹åŒ</li></ul><h2 id="äº¤å‰ç¼–è¯‘"><a href="#äº¤å‰ç¼–è¯‘" class="headerlink" title="äº¤å‰ç¼–è¯‘"></a>äº¤å‰ç¼–è¯‘</h2><h4 id="æ–°å»ºé¡¹ç›®"><a href="#æ–°å»ºé¡¹ç›®" class="headerlink" title="æ–°å»ºé¡¹ç›®"></a>æ–°å»ºé¡¹ç›®</h4><pre><code class="sh">cd ~
cargo new rust-cross-openwrt</code></pre><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><pre><code class="sh">cd ~/rust-cross-openwrt
mkdir .cargo
echo -e &quot;[target.mips-unknown-linux-musl]\nlinker = \&quot;mips-openwrt-linux-musl-gcc\&quot;\nar = \&quot;mips-openwrt-linux-musl-ar\&quot;&quot; &gt; .cargo/config</code></pre><h4 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h4><pre><code class="sh">cargo build --target mips-unknown-linux-musl --release</code></pre><h2 id="åœ¨è·¯ç”±å™¨ä¸Šè¿è¡Œ"><a href="#åœ¨è·¯ç”±å™¨ä¸Šè¿è¡Œ" class="headerlink" title="åœ¨è·¯ç”±å™¨ä¸Šè¿è¡Œ"></a>åœ¨è·¯ç”±å™¨ä¸Šè¿è¡Œ</h2><h4 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h4><pre><code class="sh">scp target/mips-unknown-linux-musl/release/rust-cross-openwrt root@10.0.0.1:/tmp</code></pre><h4 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h4><pre><code class="sh">ssh root@10.0.0.1</code></pre><h4 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h4><pre><code class="sh">/tmp/rust-cross-openwrt
# Hello, world! </code></pre><ul><li>æˆåŠŸæ‰“å°å‡º Hello, world! ğŸ‰ğŸ‰ğŸ‰</li></ul></article><div class="nexmoe-post-copyright"><i class="mdui-list-item-icon nexmoefont icon-info-circle"></i> <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>suika<br><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://suikastar.com/posts/56623/" title="http://suikastar.com/posts/56623/" target="_blank" rel="noopener">http://suikastar.com/posts/56623/</a><br><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a> åè®®è¿›è¡Œè®¸å¯</div><section class="nexmoe-comment"><script id="dsq-count-scr" src="https://suikastar.disqus.com/count.js" async></script><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="http://suikastar.com/posts/56623/",this.page.identifier="http://suikastar.com/posts/56623/"}</script><script id="disqus-thread-script">!function(){var e=document,t=e.createElement("script");t.src="//suikastar.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script></section></div><div class="nexmoe-hitokoto"><p id="hitokoto">å°‘å¥³ç¥ˆç¥·ä¸­â€¦â€¦</p></div></div></div><script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.9/build/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="https://cdn.jsdelivr.net/gh/suikastar/suikastar.github.io@jsdelivr-20200628040132/js/app.js"></script></body></html>